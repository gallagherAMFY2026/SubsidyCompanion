{
  "meta": {
    "owner": "Ag funding monitor",
    "version": "2025-09-26",
    "notes": [
      "Grants.gov search2 is public and does not require auth; POST JSON to the endpoint.",
      "Use fetchOpportunity to hydrate full details for items discovered via search2.",
      "RSS URLs are authoritative USDA/agency feeds intended for alerting and context."
    ]
  },
  "sources": {
    "grants_gov": {
      "api_base": "https://api.grants.gov/v1/api",
      "endpoints": {
        "search2": "/search2",
        "detail": "/fetchOpportunity"
      },
      "docs": [
        "https://grants.gov/api/common/search2",
        "https://grants.gov/api/api-guide",
        "https://www.grants.gov/api"
      ]
    },
    "rss": {
      "usda_hq": [
        "https://www.usda.gov/media/press-releases/rss.xml"
      ],
      "fns": [
        "https://www.fns.usda.gov/newsroom/rss.xml",
        "https://www.fns.usda.gov/blogs/rss.xml",
        "https://www.fns.usda.gov/subscriber-updates/rss.xml",
        "https://www.fns.usda.gov/federal-register/rss.xml",
        "https://www.fns.usda.gov/snap/policy-memos/rss.xml",
        "https://www.fns.usda.gov/wic/policy-memos/rss.xml",
        "https://www.fns.usda.gov/cnp/policy-memos/rss.xml",
        "https://www.fns.usda.gov/fdp/policy-memos/rss.xml",
        "https://www.fns.usda.gov/fmnp/policy-memos/rss.xml",
        "https://www.fns.usda.gov/sfmnp/policy-memos/rss.xml"
      ],
      "rd": [
        "https://www.rd.usda.gov/newsroom/rss"
      ],
      "ars": [
        "https://www.ars.usda.gov/oc/rssfeeds/usda-ars-news.xml"
      ],
      "nass": [
        "https://www.nass.usda.gov/rss/Newsreleases.xml"
      ]
    }
  },
  "jobs": [
    {
      "name": "USDA_all_agriculture_new_modified",
      "type": "grants_gov_search2",
      "cadence": "0 */1 * * *",
      "request": {
        "rows": 100,
        "startRecordNum": 0,
        "oppStatuses": "forecasted|posted|modified",
        "fundingCategories": "AG",
        "agencies": "USDA"
      },
      "hydrate_detail": true
    },
    {
      "name": "AMS_grants_keywords_aln",
      "type": "grants_gov_search2",
      "cadence": "15 */1 * * *",
      "request": {
        "rows": 100,
        "oppStatuses": "forecasted|posted|modified",
        "agencies": "USDA-AMS|USDA-AMS-SC|USDA-AMS-TM",
        "keyword": "Specialty Crop|SCBGP|Local Food|LAMP|LFPP|FMPP|Dairy Business Innovation|DBI|Meat and Poultry|MPPEP|Organic Transition",
        "aln": ""
      },
      "hydrate_detail": true
    },
    {
      "name": "FNS_farm_to_school_and_market_access",
      "type": "grants_gov_search2",
      "cadence": "30 */1 * * *",
      "request": {
        "rows": 100,
        "oppStatuses": "forecasted|posted|modified",
        "agencies": "USDA-FNS",
        "keyword": "Farm to School|Patrick Leahy|Farmers' Market Nutrition|FMNP|SFMNP|WIC Farmers|Local Food Purchase|LFPA"
      },
      "hydrate_detail": true
    },
    {
      "name": "RD_value_added_energy_meat",
      "type": "grants_gov_search2",
      "cadence": "45 */1 * * *",
      "request": {
        "rows": 100,
        "oppStatuses": "forecasted|posted|modified",
        "agencies": "USDA-RD|USDA-RBS|USDA-RUS|USDA-RD-RBCS",
        "keyword": "Value-Added Producer Grant|VAPG|Rural Energy|REAP|Meat and Poultry|MPPEP|Rural Business",
        "aln": ""
      },
      "hydrate_detail": true
    },
    {
      "name": "USDA_ALN_examples_daily",
      "type": "grants_gov_search2",
      "cadence": "0 6 * * *",
      "request": {
        "rows": 100,
        "oppStatuses": "forecasted|posted|modified",
        "agencies": "USDA",
        "aln": "10.170|10.351|10.868|10.769"
      },
      "notes": [
        "Validate ALNs against live RFAs; values are examples for SCBGP, VAPG, LAMP components, Farm to School."
      ],
      "hydrate_detail": true
    },
    {
      "name": "fetch_detail_on_discovery",
      "type": "grants_gov_fetchOpportunity",
      "cadence": "event_driven",
      "request": {
        "opportunityNumber": "{{opportunity.number}}"
      }
    },
    {
      "name": "RSS_USDA_HQ",
      "type": "rss_poll",
      "cadence": "*/30 * * * *",
      "urls": ["https://www.usda.gov/media/press-releases/rss.xml"]
    },
    {
      "name": "RSS_FNS_all",
      "type": "rss_poll",
      "cadence": "*/30 * * * *",
      "urls": [
        "https://www.fns.usda.gov/newsroom/rss.xml",
        "https://www.fns.usda.gov/blogs/rss.xml",
        "https://www.fns.usda.gov/subscriber-updates/rss.xml",
        "https://www.fns.usda.gov/federal-register/rss.xml",
        "https://www.fns.usda.gov/snap/policy-memos/rss.xml",
        "https://www.fns.usda.gov/wic/policy-memos/rss.xml",
        "https://www.fns.usda.gov/cnp/policy-memos/rss.xml",
        "https://www.fns.usda.gov/fdp/policy-memos/rss.xml",
        "https://www.fns.usda.gov/fmnp/policy-memos/rss.xml",
        "https://www.fns.usda.gov/sfmnp/policy-memos/rss.xml"
      ]
    },
    {
      "name": "RSS_RD_newsroom",
      "type": "rss_poll",
      "cadence": "*/30 * * * *",
      "urls": ["https://www.rd.usda.gov/newsroom/rss"]
    },
    {
      "name": "RSS_ARS_news",
      "type": "rss_poll",
      "cadence": "*/60 * * * *",
      "urls": ["https://www.ars.usda.gov/oc/rssfeeds/usda-ars-news.xml"]
    },
    {
      "name": "RSS_NASS_releases",
      "type": "rss_poll",
      "cadence": "*/60 * * * *",
      "urls": ["https://www.nass.usda.gov/rss/Newsreleases.xml"]
    }
  ],
  "parsing": {
    "grants_gov_fields": [
      "id",
      "number",
      "title",
      "agencyName",
      "agencyCode",
      "openDate",
      "closeDate",
      "oppStatus",
      "docType",
      "alnist",
      "category",
      "postDate",
      "archiveDate",
      "estimatedFunding",
      "expectedNumberOfAwards",
      "eligibilities",
      "description",
      "opportunityCategory"
    ],
    "rss_fields": [
      "title",
      "link",
      "pubDate",
      "guid",
      "category",
      "summary"
    ]
  },
  "routing": {
    "rules": [
      {
        "match": {"agencyCode": "USDA-AMS"},
        "destinations": ["queue_ams", "index_grants"]
      },
      {
        "match": {"agencyCode": "USDA-FNS"},
        "destinations": ["queue_fns", "index_grants"]
      },
      {
        "match": {"agencyCode": "USDA-RD"},
        "destinations": ["queue_rd", "index_grants"]
      },
      {
        "match": {"oppStatus": "modified"},
        "destinations": ["alerts_updates"]
      }
    ]
  },
  "normalization": {
    "date_format": "YYYY-MM-DD",
    "money_fields": ["estimatedFunding"],
    "list_fields": ["alnist", "eligibilities"]
  }
}
